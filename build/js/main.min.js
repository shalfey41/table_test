!function(){"use strict";function e(){function e(e,n,a){var o=document.querySelector(".pagination");null!==o&&o.removeEventListener("click",i),null!==document.getElementById("table")&&(document.getElementById("table").innerHTML="");var r=n*l.nItemsOnPage,c=r+l.nItemsOnPage,d=document.createDocumentFragment(),s=document.createElement("table"),u=document.createElement("div"),m=document.createElement("thead"),p=document.createElement("tbody"),v=document.createElement("tr"),g=document.createElement("td");s.classList.add("table"),m.classList.add("table__thead"),v.classList.add("table__row"),u.id="table-container",u.classList.add("table-container"),u.appendChild(s),s.appendChild(m);for(var h=0;h<4;h++){var f=g.cloneNode();m.appendChild(f),0==h?f.textContent="ФИО":1==h?f.textContent="Дата рождения":2==h?f.textContent="Средний балл":3==h&&(f.textContent="Курс")}if(s.appendChild(p),void 0!==a)var C=a,y=e.filter(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var a=e[t[n]].toString();if(a=a.toLowerCase(),a.indexOf(C)!==-1)return e}});else var y=e.slice(0);var E=y.slice(r,c);if(E.forEach(function(e){for(var t=v.cloneNode(),n=Object.keys(e),a=0;a<n.length;a++){var o=g.cloneNode();t.appendChild(o),o.textContent=e[n[a]]}p.appendChild(t)}),d.appendChild(u),y.length>l.nItemsOnPage){var L=t(l.nItemsOnPage,y);if(L!==!1){d.appendChild(L);var b=d.querySelectorAll(".pagination__item");b[n].classList.add("active")}}return d}function t(e,t){if(t.length>e){var n=document.createDocumentFragment(),a=document.createElement("ul"),o=document.createElement("li"),i=Math.ceil(t.length/e);a.classList.add("pagination"),o.classList.add("pagination__item");for(var r=0;r<i;r++){var l=o.cloneNode();l.textContent=r+1,a.appendChild(l)}return n.appendChild(a),n}}function n(t,n,i){var r=document.getElementById("table"),l=e(t,n,i);r.appendChild(l),a(r),window.onresize=function(){a(r)},o()}function a(e){var t=e.querySelector(".table__row"),n=e.querySelector(".table"),a=document.getElementById("table-container");if(null!==t){var o=t.getBoundingClientRect().height;a.style.height=o*(l.nItemsOnPage+1)+"px"}else{var i=n.querySelector("tbody");i.innerHTML="<tr><td>Нет данных</td></tr>"}}function o(){var e=document.querySelector(".pagination");null!==e&&e.addEventListener("click",i)}function i(e){var t=e.target||e.srcElement,n=this.querySelectorAll(".pagination__item");if(!t.classList.contains("active")&&(Array.prototype.forEach.call(n,function(e){t.classList.contains("pagination__item")&&e.classList.remove("active")}),t.classList.contains("pagination__item"))){var a=r.value;l.loadFromBase(t.textContent-1,a)}}var r=document.getElementById("searchInput"),l=this;l.nItemsOnPage=5,l.pathToDatabase="js/data.json",l.loadFromBase=function(e,t){var a=new XMLHttpRequest;a.open("GET",l.pathToDatabase),a.timeout=1e4,a.onload=function(a){var o=JSON.parse(a.target.response);n(o,e,t)},a.send()},r.addEventListener("keyup",function(e){var t=this.value;t.toString(),t=t.toLowerCase(),t=t.trim(),l.loadFromBase(0,t)})}var t=new e;t.loadFromBase(0)}();